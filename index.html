<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loading to Video Landing Page</title>

    <link rel="stylesheet" href="styles/home.css" />
  </head>

  <body>
    <!-- ✅ LOADER -->
    <div id="loader">
      <img src="logo.png" class="logo-img" />
      <div class="loading-text">Loading<span class="dots"></span></div>
    </div>

    <!-- ✅ MENU BAR -->
    <div class="top-backdrop" id="menuBar">
      <button class="menu-button" id="menuToggle" aria-label="Toggle menu">
        <span class="menu-icon"></span>
      </button>
    </div>

    <!-- ✅ FULLSCREEN MENU -->
    <div class="menu-overlay" id="menuOverlay" aria-hidden="true">
      <div class="menu-radial">
        <div class="orbit">
          <a href="about.html" class="orbit-item" style="--x: -80px; --y: -250px">About</a>
          <a href="team.html" class="orbit-item" style="--x: 138px; --y: -140px">Team</a>
          <a href="contacts.html" class="orbit-item" style="--x: 138px; --y: 80px">Contacts</a>
          <a href="#" class="orbit-item" style="--x: -80px; --y: 160px">Events</a>
          <a href="glimps.html" class="orbit-item" style="--x: -308px; --y: 80px">Glimpses</a>
          <a href="sponsor.html" class="orbit-item" style="--x: -308px; --y: -140px">Sponsor</a>
        </div>
        <button class="menu-center" id="loginBtn">Login</button>
      </div>
    </div>

    
    <div id="landing">
    
      <video id="desktopVideo" muted playsinline preload="auto">
        <source src="laptop2.mp4" type="video/mp4" />
      </video>

      
      <video
        id="mobileVideo"
        muted
        playsinline
        preload="auto"
        style="display: none"
      >
        <source src="VN20251208_012531.mp4" type="video/mp4" />
      </video>
    </div>

    
    <script>
      const loader = document.getElementById("loader");
      const landing = document.getElementById("landing");
      const desktopVideo = document.getElementById("desktopVideo");
      const mobileVideo = document.getElementById("mobileVideo");
      const menuBar = document.getElementById("menuBar");
      const menuToggle = document.getElementById("menuToggle");
      const menuOverlay = document.getElementById("menuOverlay");
      const loginBtn = document.getElementById("loginBtn");

      function isMobile() {
        return window.matchMedia("(max-width: 768px)").matches;
      }

      function selectVideo() {
        if (isMobile()) {
          desktopVideo.style.display = "none";
          mobileVideo.style.display = "block";
          return mobileVideo;
        } else {
          mobileVideo.style.display = "none";
          desktopVideo.style.display = "block";
          return desktopVideo;
        }
      }

      let activeVideo = selectVideo();

      activeVideo.addEventListener("canplaythrough", () => {
        setTimeout(() => {
          loader.style.display = "none";
          landing.style.display = "block";
          activeVideo.play();
        }, 800);
      });

      activeVideo.addEventListener("ended", () => {
        menuBar.style.display = "flex";
      });

      
      window.addEventListener("resize", () => {
        activeVideo.pause();
        activeVideo = selectVideo();
        activeVideo.play();
      });

      
      function toggleMenu(forceState) {
        const isOpen =
          forceState !== undefined
            ? forceState
            : !menuOverlay.classList.contains("show");
        menuOverlay.classList.toggle("show", isOpen);
        menuToggle.classList.toggle("open", isOpen);
        menuOverlay.setAttribute("aria-hidden", !isOpen);
      }

      menuToggle.addEventListener("click", () => toggleMenu());

      menuOverlay.addEventListener("click", (e) => {
        if (e.target === menuOverlay) {
          toggleMenu(false);
        }
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") toggleMenu(false);
      });

      loginBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        window.location.href = "login.html";
        toggleMenu(false);
      });

      
      setTimeout(() => {
        loader.style.display = "none";
        landing.style.display = "block";
        activeVideo.play();
      }, 6000);
    </script>
  </body>
</html>
